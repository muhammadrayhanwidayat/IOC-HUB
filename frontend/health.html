<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>API Health Status | Jormungand</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <meta name="description" content="leosycthe — Offensive security student" />
    <link rel="stylesheet" href="style/style.css">
    <!-- FAVICON & APP ICONS -->
    <link rel="manifest" href="../favicon/manifest.json">
    <meta name="theme-color" content="#0b0f14">
    <link rel="icon" type="image/png" sizes="32x32" href="../favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../favicon/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../favicon/favicon-96x96.png">
    <link rel="shortcut icon" href="../favicon/favicon.ico">
    <!-- Apple iOS -->
    <link rel="apple-touch-icon" sizes="180x180" href="../favicon/apple-icon-180x180.png">
    <!-- Windows tiles -->
    <meta name="msapplication-TileColor" content="#0b0f14">
    <meta name="msapplication-TileImage" content="../favicon/ms-icon-144x144.png">
</head>
<body class="bg-gray-900 text-white min-h-screen flex items-center justify-center">

    <div class="bg-gray-800 border border-gray-700 rounded-xl p-8 w-full max-w-lg shadow-xl relative">

        <!-- BACK BUTTON -->
        <a href="/"
           class="absolute top-4 left-4
                  flex items-center gap-2
                  text-sm text-gray-400 hover:text-blue-400">
            ← Back
        </a>

        <h1 class="text-3xl font-bold text-center mb-2
                   bg-gradient-to-r from-blue-400 to-purple-500
                   bg-clip-text text-transparent">
            Jormungand API Health
        </h1>

        <p class="text-center text-gray-400 mb-6">
            Real-time API status monitoring
        </p>

        <!-- STATUS CARD -->
        <div id="statusCard"
             class="bg-gray-900 border border-gray-700 rounded-lg p-6 text-center">
            <p class="text-gray-400 mb-2">Checking API status...</p>
        </div>

        <div class="mt-6 flex justify-center gap-4">
            <button onclick="checkHealth()"
                    class="px-6 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold">
                Refresh
            </button>
        </div>

        <p class="text-center text-xs text-gray-500 mt-6">
            Endpoint:
            <code class="text-blue-400">http://localhost:3000/api/health</code>
        </p>
    </div>

    <script>
        async function checkHealth() {
            const card = document.getElementById("statusCard");
            card.innerHTML = `<p class="text-gray-400">Checking API status...</p>`;

            try {
                const start = performance.now();
                const res = await fetch("http://localhost:3000/api/health");
                const data = await res.json();
                const latency = Math.round(performance.now() - start);

                if (data.success) {
                    card.innerHTML = `
                        <div class="flex flex-col items-center gap-3">
                            <span class="px-4 py-1 rounded-full text-sm font-semibold
                                         bg-green-900 text-green-400 border border-green-700">
                                ● ONLINE
                            </span>

                            <p class="text-lg font-semibold text-white">
                                ${data.message}
                            </p>

                            <p class="text-sm text-gray-400">
                                Timestamp:
                                <span class="text-blue-400">
                                    ${new Date(data.timestamp).toLocaleString()}
                                </span>
                            </p>

                            <p class="text-xs text-gray-500">
                                Response time: ${latency} ms
                            </p>
                        </div>
                    `;
                } else {
                    throw new Error("API returned failure");
                }

            } catch (err) {
                card.innerHTML = `
                    <div class="flex flex-col items-center gap-3">
                        <span class="px-4 py-1 rounded-full text-sm font-semibold
                                     bg-red-900 text-red-400 border border-red-700">
                            ● OFFLINE
                        </span>
                        <p class="text-gray-400">
                            Unable to reach API endpoint
                        </p>
                    </div>
                `;
            }
        }

        checkHealth();
    </script>

</body>
</html>
